// ==========================================================================
// Project:  Ember FormBuilder
// Copyright: Â©2012 Luan Santos. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================


(function(a){((function(){var a;a=Ember.Mixin.create({wrapperTag:"div",wrapperClass:"control-group",inputWrapperTag:"div",inputWrapperClass:"controls",labelClass:"control-label",helpTag:"p",helpClass:"help-block",errorTag:"span",errorClass:"help-inline",formClass:"",submitClass:"btn btn-success",cancelClass:"btn btn-danger",submitTag:"button",cancelTag:"a"}),Ember.FormBuilder=Ember.Namespace.create({mixins:{bootstrap:a},pushMixin:function(a,b){return this.mixins[b]=a},getMixin:function(a){return this.mixins[a]}})})).call(this)})({}),function(a){((function(){Ember.Handlebars.registerHelper("addAssociation",function(a,b){return b.hash.contentBinding="content."+a,b.hash.preserveContext=!0,Ember.Handlebars.helpers.view.call(this,"Ember.FormBuilder.AddAssociation",b)})})).call(this)}({}),function(a){((function(){Ember.Handlebars.registerHelper("cancel",function(a,b){var c,d;return b||(b=a,b.hash.text||(a=((c=Ember.FormBuilder.STRINGS)!=null?(d=c[this.objectName])!=null?d.cancel:void 0:void 0)||"Cancel")),b.hash.preserveContext=!1,b.hash.form=this,b.hash.text=a,Ember.Handlebars.helpers.view.call(this,"Ember.FormBuilder.Cancel",b)})})).call(this)}({}),function(a){((function(){Ember.Handlebars.registerHelper("fieldsFor",function(a,b){return b.hash.contentBinding="content."+a,b.hash.preserveContext=!0,b.hash.form=this,Ember.Handlebars.helpers.collection.call(this,"Ember.FormBuilder.NestedFields",b)})})).call(this)}({}),function(a){((function(){Ember.Handlebars.registerHelper("formFor",function(a,b){return b.hash.contentBinding=a,b.hash.objectName=a,b.hash.parentView=this,b.hash.preserveContext=!0,Ember.Handlebars.helpers.view.call(this,"Ember.FormBuilder.Form",b)})})).call(this)}({}),function(a){((function(){Ember.Handlebars.registerHelper("input",function(a,b){var c,d,e,f,g,h,i,j,k,l,m;g=Ember.String.w("label hint placeholder");for(e=0,f=g.length;e<f;e++)c=g[e],b.hash[c]||(b.hash[c]=(h=Ember.FormBuilder.STRINGS)!=null?(i=h[this.objectName])!=null?(j=i[c+"s"])!=null?j[a]:void 0:void 0:void 0,b.hash[c]||(b.hash[c]=(k=Ember.FormBuilder.STRINGS)!=null?(l=k.defaults)!=null?(m=l[c+"s"])!=null?m[a]:void 0:void 0:void 0));return b.hash.label||(d=Ember.String.underscore(a).split("_"),d=d.map(function(a){return a.charAt(0).toUpperCase()+a.substring(1)}),b.hash.label=d.join(" ")),b.hash.valueBinding="content."+a,b.hash.preserveContext=!0,b.hash.form=this.form||this,Ember.Handlebars.helpers.view.call(this,"Ember.FormBuilder.Input",b)})})).call(this)}({}),function(a){((function(){Ember.Handlebars.registerHelper("removeAssociation",function(a,b){return console.log(this),b.hash.contentBinding="content",b.hash.collectionBinding="form.content."+a,b.hash.preserveContext=!0,Ember.Handlebars.helpers.view.call(this,"Ember.FormBuilder.RemoveAssociation",b)})})).call(this)}({}),function(a){((function(){Ember.Handlebars.registerHelper("submit",function(a,b){var c,d;return b||(b=a,b.hash.text||(a=((c=Ember.FormBuilder.STRINGS)!=null?(d=c[this.objectName])!=null?d.submit:void 0:void 0)||"Submit")),b.hash.preserveContext=!1,b.hash.form=this,b.hash.text=a,Ember.Handlebars.helpers.view.call(this,"Ember.FormBuilder.Submit",b)})})).call(this)}({}),function(a){Ember.FormBuilder.Info=Ember.View.extend({classNameBindings:["classes"],template:Ember.Handlebars.compile("{{text}}")})}({}),function(a){((function(){Ember.FormBuilder.AddAssociation=Ember.View.extend({tagName:"a",classNameBindings:["classes"],template:Ember.Handlebars.compile("{{text}}"),click:function(){var a,b;return a=this.content,b=Ember.getPath(this.objectClass),a.pushObject(b.create({form:this.form}))}})})).call(this)}({}),function(a){((function(){Ember.FormBuilder.Cancel=Ember.View.extend({classNameBindings:["classes"],template:Ember.Handlebars.compile("{{text}}"),init:function(){return this._super(),this.set("tagName",this.tagName||this.form.cancelTag),this.set("cancelClass",this.cancelClass||this.form.cancelClass),this.set("classes",""+this.cancelClass+" cancel-button")},click:function(a){return this.form.parentView[""+this.form.objectName+"Cancel"](a)}})})).call(this)}({}),function(a){Ember.FormBuilder.Error=Ember.FormBuilder.Info.extend({init:function(){return this._super(),this.set("classes",this.get("classes")||Ember.FormBuilder.errorClass),this.set("tagName",this.get("tagName")||Ember.FormBuilder.errorTag)}})}({}),function(a){((function(){Ember.FormBuilder.Form=Ember.View.extend({tagName:"form",classNameBindings:["classes","formClass"],init:function(){return this._super(),this.set("mixin",this.mixin||"bootstrap"),this.reopen(Ember.FormBuilder.getMixin(this.mixin))}})})).call(this)}({}),function(a){Ember.FormBuilder.Help=Ember.FormBuilder.Info.extend({init:function(){return this._super(),this.set("classes",this.get("classes")||Ember.FormBuilder.helpClass),this.set("tagName",this.get("tagName")||Ember.FormBuilder.helpTag)}})}({}),function(a){((function(){Ember.FormBuilder.Input=Ember.View.extend({tagNameBinding:"wrapperTag",classNameBindings:["wrapperClass","infoClass"],inputClass:"",label:"",init:function(){return this._super(),this.set("inputView",this.inputView||"Ember.TextField"),this.set("wrapperTag",this.wrapperTag||this.form.wrapperTag),this.set("wrapperClass",this.wrapperClass||this.form.wrapperClass),this.set("inputWrapperTag",this.inputWrapperTag||this.form.inputWrapperTag),this.set("inputWrapperClass",this.inputWrapperClass||this.form.inputWrapperClass),this.set("labelClass",this.labelClass||this.form.labelClass),this.set("helpTag",this.helpTag||this.form.helpTag),this.set("helpClass",this.helpClass||this.form.helpClass),this.set("errorTag",this.errorTag||this.form.errorTag),this.set("errorClass",this.errorClass||this.form.errorClass),this.showLabel===void 0&&this.set("showLabel",!0),Ember.empty(this.value)&&this.set("value",""),this.errorChanged(),this.set("template",Ember.Handlebars.compile('      {{#if showLabel}}        <label {{bindAttr class="labelClass"}} for="'+Ember.guidFor(this)+'input">          {{label}}        </label>      {{/if}}      {{#view Ember.View tagName=inputWrapperTag class=inputWrapperClass contentBinding="this"}}        '+this.field()+'        {{#if content.error}}          {{#view Ember.View class=content.errorClass tagNameBinding="content.errorTag" contentBinding="content"}}            {{content.error}}          {{/view}}        {{/if}}        {{#if content.hint}}          {{#view Ember.View class=content.helpClass tagNameBinding="content.helpTag" contentBinding="content"}}            {{content.hint}}          {{/view}}        {{/if}}      {{/view}}    '))},errorChanged:Ember.observer(function(){return Ember.empty(this.error)?this.set("infoClass",""):this.set("infoClass","error")},"error"),field:function(){switch(this.as){case"select":return this.selectTag();default:return this.textInput()}},textInput:function(){return"{{view "+this.inputView+' id="'+Ember.guidFor(this)+'input"         placeholder=content.placeholder class=content.inputClass         valueBinding="content.value"}} '},selectTag:function(){var a;return a='{{view Ember.Select                  contentBinding="content.collection"                  selectionBinding="value"                  optionLabelPath="content.label"                  optionValuePath="content.value"',this.prompt&&(a+=' prompt="'+this.prompt+'"'),a+="}}"}})})).call(this)}({}),function(a){((function(){Ember.FormBuilder.NestedFields=Ember.CollectionView.extend(Ember.Metamorph,{itemViewClass:Ember.View.extend(Ember.Metamorph)},{classNameBindings:["classes",":nested-fields"],form:this.form,init:function(){return this._super(),this.set("mixin",this.mixin||this.form.mixin||"bootstrap"),this.reopen(Ember.FormBuilder.getMixin(this.mixin))}})})).call(this)}({}),function(a){((function(){Ember.FormBuilder.RemoveAssociation=Ember.View.extend({tagName:"a",classNameBindings:["classes"],template:Ember.Handlebars.compile("{{text}}"),click:function(){var a,b;return console.log("coll:",this.content),a=this.collection,b=this.content,a.removeObject(b)}})})).call(this)}({}),function(a){((function(){Ember.FormBuilder.Submit=Ember.View.extend({classNameBindings:["classes"],template:Ember.Handlebars.compile("{{text}}"),init:function(){return this._super(),this.set("tagName",this.tagName||this.form.submitTag),this.set("submitClass",this.submitClass||this.form.submitClass),this.set("classes",""+this.submitClass+" submit-button")},click:function(a){return this.form.parentView[""+this.form.objectName+"Submit"](a)}})})).call(this)}({}),function(a){((function(){})).call(this)}({})
